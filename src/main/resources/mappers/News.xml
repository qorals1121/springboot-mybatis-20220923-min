<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.boot.mybatis20220923min.repository.NewsRepository">

    <insert
            id="save"
            parameterType="com.boot.mybatis20220923min.domain.News"
            useGeneratedKeys="true"
            keyProperty="news_id"
    >
        insert into
        news_mst
        values (
        0,
        #{news_title},
        #{news_writer},
        #{news_broadcasting},
        #{news_content},
        now(),
        now()
        )
    </insert>

    <select id="getNews" resultType="com.boot.mybatis20220923min.domain.News">
        select
        news_id,
        news_title,
        news_writer,
        news_broadcasting,
        news_content,
        create_date,
        update_date
        from
        news_mst
        where
        news_id = #{news_id}

    </select>

    <insert
            id="saveFiles"
            parameterType="java.util.List"
            useGeneratedKeys="true"
            keyProperty="file_id"
    >
        insert into
        news_file
        values
        <foreach item="newsFile" collection="newsFileList" separator=",">
            (
            0,
            #{newsFile.news_id},
            #{newsFile.file_origin_name},
            #{newsFile.file_temp_name},
            now(),
            now()
            )
        </foreach>


    </insert>
</mapper>